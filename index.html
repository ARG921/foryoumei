<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Music Player — Memoi</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg1:#BFF6D2;--bg2:#FFE6F1;--card:#101513;--text:#f5f2ea;--muted:#cfc7b7;--accent:#f5f2ea;--pill:#1b211e;--radius:28px}
    *{box-sizing:border-box}
    html,body{margin:0;min-height:100dvh;font-family:Quicksand,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:radial-gradient(1200px 800px at 10% 20%,var(--bg2),transparent),radial-gradient(900px 700px at 90% 10%,var(--bg1),transparent),radial-gradient(700px 600px at 20% 90%,#E8FFF1,transparent),#BDEFD3;color:var(--text)}
    body{display:flex;align-items:center;justify-content:center;padding:24px;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent;overscroll-behavior-y:contain}
    .player{width:min(94vw,440px);background:var(--card);border-radius:var(--radius);padding:22px 22px calc(18px + env(safe-area-inset-bottom));box-shadow:0 22px 48px rgba(0,0,0,.28),0 0 0 6px rgba(255,255,255,.03) inset;position:relative;overflow:hidden}
    .player::before,.player::after{content:"";position:absolute;filter:blur(30px);opacity:.22;pointer-events:none;border-radius:50%;mix-blend-mode:screen}
    .player::before{width:140px;height:140px;background:#ffb3cf;left:-40px;top:-30px;animation:float 7s ease-in-out infinite}
    .player::after{width:120px;height:120px;background:#b0ffd0;right:-30px;bottom:-20px;animation:float 8s 1s ease-in-out infinite}
    @keyframes float{50%{transform:translateY(8px) translateX(6px)}100%{transform:none}}
    .frame{height:260px;border-radius:20px;overflow:hidden;position:relative;background:linear-gradient(145deg,#7f7a6e,#5a5850);box-shadow:inset 0 2px 10px rgba(0,0,0,.35)}
    .message{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:24px;text-align:left;line-height:1.6;font-weight:700;color:#fff7f2;font-size:clamp(14px,2.2vw,18px);overflow:auto;-webkit-overflow-scrolling:touch}
    .hint{position:absolute;right:14px;bottom:12px;font-size:12px;color:#fff5f0;opacity:.7}
    .device{margin-top:16px;color:#bdb4a3;font-weight:700;font-size:14px}
    .title{margin-top:6px;font-size:19px;font-weight:800}
    .artist{margin-top:2px;color:#dbd3c3;font-size:14px}
    .bar{margin:12px 0 6px;height:8px;border-radius:999px;background:#343a36;position:relative;cursor:pointer;user-select:none;touch-action:none}
    .bar-fill{position:absolute;left:0;top:0;bottom:0;width:0%;background:#efe9dc;border-radius:999px}
    .time{display:flex;justify-content:space-between;color:#a8a192;font-size:12px}
    .controls{display:flex;align-items:center;gap:18px;justify-content:center;margin:16px 0 8px}
    button.icon{width:46px;height:46px;border-radius:999px;border:none;background:var(--pill);color:var(--accent);display:grid;place-items:center;cursor:pointer;transition:transform .08s ease,opacity .2s,box-shadow .25s ease;box-shadow:0 6px 14px rgba(0,0,0,.35)}
    button.icon:hover{transform:translateY(-2px)}
    button.icon:active{transform:translateY(1px)}
    button.icon svg{width:22px;height:22px;display:block}
    .is-playing #play{animation:pulse 1.3s ease-in-out infinite;box-shadow:0 0 0 6px rgba(255,255,255,.06),0 8px 18px rgba(0,0,0,.45)}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
    .sm{width:38px;height:38px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:8px}
    .vol{flex:1;height:8px;background:#363c38;border-radius:999px;position:relative}
    .vol input{appearance:none;-webkit-appearance:none;width:100%;height:8px;background:transparent;position:absolute;inset:0;margin:0}
    .vol input:disabled{opacity:.5;filter:grayscale(.3);pointer-events:none}
    .vol .vfill{height:100%;background:#f1ece0;border-radius:999px;width:70%}
    .vol input::-webkit-slider-thumb{appearance:none;-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.2)}
    .vol input::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#fff;border:none}
    @media (max-width:460px){body{padding:12px}.frame{height:220px}.player{padding:16px 14px calc(14px + env(safe-area-inset-bottom))}.controls{gap:14px}button.icon{width:44px;height:44px}.sm{width:36px;height:36px}}
  </style>
</head>
<body>
  <main class="player" id="player" role="region" aria-label="Music Player">
    <section class="frame" id="cover">
      <div class="message" id="memoiMsg"></div>
      <span class="hint">✦ For U</span>
    </section>
    <div class="device" id="deviceLabel">Detecting device…</div>
    <div class="title" id="title">Song Title — Sample</div>
    <div class="artist" id="artist">Artist — Sample</div>
    <div class="bar" id="bar" aria-label="Progress"><div class="bar-fill" id="barFill"></div></div>
    <div class="time"><span id="cur">0:00</span><span id="dur">0:00</span></div>
    <div class="controls" aria-label="Controls">
      <button class="icon sm" id="prev" aria-label="Previous" title="Previous"></button>
      <button class="icon" id="play" aria-label="Play/Pause" title="Play/Pause"></button>
      <button class="icon sm" id="next" aria-label="Next" title="Next"></button>
    </div>
    <div class="row">
      <div style="display:flex;align-items:center;gap:8px;color:#cfc8b8;font-size:13px">Volume</div>
      <div class="vol"><div class="vfill" id="vfill"></div><input type="range" id="volume" min="0" max="1" step="0.01" value="0.7" aria-label="Volume" /></div>
    </div>
  </main>
  <script>
    const tracks=[{title:"uKYdS",artist:"For Revenge",src:"uKYdS.mp3",gradient:"linear-gradient(145deg,#7f7a6e,#5a5850)",message:`No matter how rough the storm gets, i still see the light in you.`},{title:"semua lagu cinta terdengar sama",artist:"Hindia",src:"semua lagu cinta terdengar sama.mp3",gradient:"linear-gradient(145deg,#6d7262,#464b43)",message:`Every love song feels the same lately, but somehow… they all remind me of you.`},{title:"Constellations",artist:"Keenan Te",src:"Constellations.mp3",gradient:"linear-gradient(145deg,#726c63,#49453f)",message:`Constellations makes me think of you... how even across the furthest skies, you still shine in my world.`}];
    const icons={play:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>',pause:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>',next:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 6l8 6-8 6V6zm9 0h2v12h-2z"/></svg>',prev:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M17 6v12l-8-6 8-6zm-11 0h2v12H6z"/></svg>'};
    const player=document.getElementById('player');
    const deviceLabel=document.getElementById('deviceLabel');
    const titleEl=document.getElementById('title');
    const artistEl=document.getElementById('artist');
    const coverEl=document.getElementById('cover');
    const msgEl=document.getElementById('memoiMsg');
    const playBtn=document.getElementById('play');
    const prevBtn=document.getElementById('prev');
    const nextBtn=document.getElementById('next');
    const bar=document.getElementById('bar');
    const barFill=document.getElementById('barFill');
    const cur=document.getElementById('cur');
    const dur=document.getElementById('dur');
    const vol=document.getElementById('volume');
    const vfill=document.getElementById('vfill');
    let idx=0;const audio=new Audio();audio.preload='metadata';
    function fmt(t){if(!isFinite(t))return'0:00';const m=Math.floor(t/60);const s=Math.floor(t%60).toString().padStart(2,'0');return`${m}:${s}`}
    function deviceName(){const ua=navigator.userAgent||navigator.vendor||'';const pf=navigator.platform||'';if(/android/i.test(ua))return'Android phone';if(/iPhone/i.test(ua))return'iPhone';if(/iPad/i.test(ua)||(/MacIntel/.test(pf)&&navigator.maxTouchPoints>1))return'iPad';if(/Mac|Macintosh/i.test(ua)||/Mac/.test(pf))return'Mac';if(/Win/i.test(ua)||/Win/.test(pf))return'Windows PC';if(/Linux/i.test(ua))return'Linux device';return/Mobile/i.test(ua)?'mobile device':'desktop device'}
    function setPlayIcon(p){playBtn.innerHTML=p?icons.pause:icons.play;player.classList.toggle('is-playing',!!p)}
    function load(i){idx=(i+tracks.length)%tracks.length;const t=tracks[idx];audio.src=t.src;titleEl.textContent=t.title;artistEl.textContent=t.artist;coverEl.style.background=t.gradient;msgEl.textContent=t.message;barFill.style.width='0%';cur.textContent='0:00';dur.textContent='0:00';window.scrollTo({top:0,behavior:'smooth'});setPlayIcon(false)}
    function toggle(){if(audio.paused){audio.play();setPlayIcon(true)}else{audio.pause();setPlayIcon(false)}}
    function next(){load(idx+1);audio.play();setPlayIcon(true)}
    function prev(){load(idx-1);audio.play();setPlayIcon(true)}
    playBtn.addEventListener('click',toggle);
    nextBtn.innerHTML=icons.next;prevBtn.innerHTML=icons.prev;
    nextBtn.addEventListener('click',next);
    prevBtn.addEventListener('click',prev);
    let seeking=false;let activePointerId=null;
    function seekToClientX(xClient){const rect=bar.getBoundingClientRect();const x=Math.max(0,Math.min(xClient-rect.left,rect.width));const pct=rect.width?(x/rect.width):0;barFill.style.width=(pct*100)+'%';if(isFinite(audio.duration))audio.currentTime=pct*audio.duration}
    function onPointerDown(e){seeking=true;activePointerId=e.pointerId;bar.setPointerCapture?.(e.pointerId);seekToClientX(e.clientX)}
    function onPointerMove(e){if(seeking&&(activePointerId===null||e.pointerId===activePointerId))seekToClientX(e.clientX)}
    function onPointerUp(e){seeking=false;activePointerId=null;bar.releasePointerCapture?.(e.pointerId)}
    if(window.PointerEvent){bar.addEventListener('pointerdown',onPointerDown);window.addEventListener('pointermove',onPointerMove);window.addEventListener('pointerup',onPointerUp);window.addEventListener('pointercancel',onPointerUp)}else{bar.addEventListener('touchstart',e=>{if(e.touches[0])seekToClientX(e.touches[0].clientX)},{passive:false});bar.addEventListener('touchmove',e=>{if(e.touches[0])seekToClientX(e.touches[0].clientX)},{passive:false});bar.addEventListener('mousedown',e=>seekToClientX(e.clientX))}
    vol.addEventListener('input',()=>{audio.volume=vol.valueAsNumber;vfill.style.width=`${audio.volume*100}%`});
    vfill.style.width=`${vol.value*100}%`;
    const dn=(navigator.userAgent||'')+(navigator.platform||'');
    if(/iPhone|iPad|iPod/i.test(dn)){vol.disabled=true;vfill.style.width='100%'}
    audio.addEventListener('timeupdate',()=>{barFill.style.width=`${(audio.currentTime/(audio.duration||1))*100}%`;cur.textContent=fmt(audio.currentTime)});
    audio.addEventListener('loadedmetadata',()=>{dur.textContent=fmt(audio.duration)});
    audio.addEventListener('ended',next);
    window.addEventListener('keydown',e=>{if(e.code==='Space'){e.preventDefault();toggle()}if(e.code==='ArrowRight'){next()}if(e.code==='ArrowLeft'){prev()}});
    deviceLabel.textContent='Playing on '+deviceName();
    function centerLayout(){const vh=window.innerHeight||document.documentElement.clientHeight;const ph=player.offsetHeight;const padY=Math.max(12,Math.floor((vh-ph)/2));document.body.style.paddingTop=padY+'px';document.body.style.paddingBottom=`calc(${padY}px + env(safe-area-inset-bottom))`}
    load(0);requestAnimationFrame(centerLayout);window.addEventListener('resize',centerLayout);window.addEventListener('orientationchange',centerLayout);audio.addEventListener('loadedmetadata',centerLayout);
    (function(){try{console.assert(fmt(0)==='0:00','fmt(0) should be 0:00');console.assert(fmt(65)==='1:05','fmt(65) should be 1:05');console.assert(typeof deviceName()==='string'&&deviceName().length>0,'deviceName should return non-empty string');console.assert(Array.isArray(tracks)&&tracks.length===3,'should have 3 tracks');const fakeRect={left:0,width:200};const x=100;const pct=x/fakeRect.width;console.assert(Math.abs(pct-0.5)<1e-6,'seek percent 0.5');console.log('%cTests passed','color:#0f0')}catch(e){console.error('Test failed',e)}})();
    (function(){try{console.assert(typeof icons.play==='string'&&icons.play.includes('<svg'),'icons.play should be inline SVG');console.assert(titleEl.textContent.length>0&&artistEl.textContent.length>0,'title/artist populated after load')}catch(e){console.warn('Additional tests warning',e)}})();
  </script>
</body>
</html>